operations:
  - create_table:
      name: "repartijas"
      columns:
        - name: "id"
          type: "text"
          pk: true
        - name: "grupo__id"
          type: "text"
          nullable: false
          references:
            table: "grupos"
            column: "id"
            name: "fk_repartijas_grupo__id"
        - name: "nombre"
          type: "text"
          nullable: false
        - name: "extra__lugares_despues_de_la_coma"
          type: "int"
          nullable: false
        - name: "extra__valor"
          type: "bigint"
          nullable: false

  - create_table:
      name: "repartija_items"
      columns:
        - name: "id"
          type: "text"
          pk: true
        - name: "repartija__id"
          type: "text"
          nullable: false
          references:
            table: "repartijas"
            column: "id"
            name: "fk_repartijas_items_repartija__id"
        - name: "nombre"
          type: "text"
          nullable: false
        - name: "monto__lugares_despues_de_la_coma"
          type: "int"
          nullable: false
        - name: "monto__valor"
          type: "bigint"
          nullable: false
        - name: "cantidad"
          type: "integer"
          nullable: false

  - create_table:
      name: "repartija_claims"
      columns:
        - name: "id"
          type: "text"
          pk: true
        - name: "participante__id"
          type: "text"
          nullable: false
          references:
            table: "participantes"
            column: "id"
            name: "fk_repartijas_claims_participante__id"
        - name: "repartija_item__id"
          type: "text"
          nullable: false
          references:
            table: "repartija_items"
            column: "id"
            name: "fk_repartijas_claims_repartija_item__id"
        - name: "cantidad"
          type: "integer"
          nullable: true

  - create_index:
      table: "repartija_claims"
      name: "repartija_item_id__repartija_participante__unique"
      columns:
        participante__id: {}
        repartija_item__id: {}
      unique: true
